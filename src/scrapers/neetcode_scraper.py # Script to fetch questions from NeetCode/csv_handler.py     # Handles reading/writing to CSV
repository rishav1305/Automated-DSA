import requests
from bs4 import BeautifulSoup
import csv
import os

def fetch_neetcode_questions():
    url = "https://neetcode.io/practice?tab=neetcode150"
    response = requests.get(url)
    soup = BeautifulSoup(response.text, 'html.parser')

    questions = []
    for question in soup.find_all('div', class_='question'):
        title = question.find('h3').text.strip()
        difficulty = question.find('span', class_='difficulty').text.strip()
        questions.append((title, difficulty))

    return questions

def save_questions_to_csv(questions, csv_file_path):
    file_exists = os.path.isfile(csv_file_path)
    with open(csv_file_path, mode='a', newline='') as file:
        writer = csv.writer(file)
        if not file_exists:
            writer.writerow(['Question', 'Difficulty'])  # Write header if file is new
        writer.writerows(questions)

if __name__ == "__main__":
    questions = fetch_neetcode_questions()
    save_questions_to_csv(questions, 'questions/questions.csv')